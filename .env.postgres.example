# PostgreSQL 数据库配置示例
# 复制此文件为 .env.postgres 并填入实际值

# =============================================================================
# 数据库配置
# =============================================================================

# PostgreSQL 基本配置
DB_USER=noveluser
DB_PASSWORD=your_secure_password_here
DB_NAME=novel_db
DB_HOST=localhost
DB_PORT=5432

# Prisma 数据库连接字符串
# 格式: postgresql://[user[:password]@][host][:port]/database[?options]
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}?schema=public

# 生产环境建议启用 SSL
# DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}?schema=public&sslmode=require

# 连接池配置（可选）
# DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}?schema=public&connection_limit=20&pool_timeout=20

# =============================================================================
# 服务器配置
# =============================================================================

NODE_ENV=production
PORT=3001
LOG_LEVEL=info

# =============================================================================
# AI 服务配置
# =============================================================================

# OpenAI API (或兼容接口)
OPENAI_API_KEY=sk-your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# 自定义 AI 提供商（可选）
CUSTOM_PROVIDER_NAME=custom
CUSTOM_API_KEY=your_custom_api_key
CUSTOM_BASE_URL=https://your-api.com/v1
CUSTOM_MODEL=your-model-name
CUSTOM_TEMPERATURE=1
CUSTOM_MAX_TOKENS=4096

# =============================================================================
# 存储配置 - Cloudflare R2
# =============================================================================

CLOUDFLARE_R2_ACCOUNT_ID=your_account_id
CLOUDFLARE_R2_ACCESS_KEY_ID=your_access_key_id
CLOUDFLARE_R2_SECRET_ACCESS_KEY=your_secret_access_key
CLOUDFLARE_R2_BUCKET_NAME=your_bucket_name
CLOUDFLARE_R2_ENDPOINT=https://your_account_id.r2.cloudflarestorage.com

# 可选：R2 公开域名
CLOUDFLARE_R2_PUBLIC_DOMAIN=https://your_account_id.r2.cloudflarestorage.com

# 可选：CDN 域名（加速访问）
CLOUDFLARE_R2_CDN_DOMAIN=cdn.yourdomain.com

# =============================================================================
# 记忆服务配置 - Mem0
# =============================================================================

MEM0_ENABLED=true
MEM0_API_KEY=your_mem0_api_key
MEM0_BASE_URL=https://api.mem0.ai
MEM0_TIMEOUT=5000
MEM0_RETRIES=3
MEM0_FALLBACK_ENABLED=true
MEM0_LOG_LEVEL=info

# =============================================================================
# 前端配置
# =============================================================================

# API 基础URL
VITE_API_BASE_URL=http://localhost:3001

# Clerk 认证（可选）
VITE_CLERK_PUBLISHABLE_KEY=pk_test_your_clerk_key_here

# 认证模式切换（可选）
VITE_ALLOW_AUTH_MODE_SWITCH=true
VITE_ENABLE_SOCIAL_LOGIN=true
VITE_ENABLE_EMAIL_VERIFICATION=true

# =============================================================================
# Docker Compose 配置
# =============================================================================

# 客户端端口
CLIENT_PORT=80

# pgAdmin 配置（可选，用于数据库管理）
PGADMIN_EMAIL=admin@example.com
PGADMIN_PASSWORD=admin
PGADMIN_PORT=5050

# =============================================================================
# 安全配置
# =============================================================================

# JWT 密钥（生产环境必须更换）
JWT_SECRET=your_jwt_secret_here_min_32_characters
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# 允许的来源（CORS）
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,https://yourdomain.com

# =============================================================================
# 监控和日志（可选）
# =============================================================================

# Sentry 错误追踪（可选）
# SENTRY_DSN=https://your_sentry_dsn

# 日志级别
# LOG_LEVEL=debug|info|warn|error

# =============================================================================
# 性能优化（可选）
# =============================================================================

# 启用查询日志
LOG_QUERIES=false

# 启用性能监控
ENABLE_PERFORMANCE_MONITORING=false

# 缓存配置
CACHE_ENABLED=true
CACHE_TTL=3600

# =============================================================================
# 备份配置（可选）
# =============================================================================

# 自动备份
AUTO_BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # 每天凌晨2点
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/path/to/backups

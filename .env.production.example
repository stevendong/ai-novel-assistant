# ================================
# AI Novel Assistant - 生产环境配置
# ================================

# ============ 基础配置 ============

# 运行环境 (不要修改)
NODE_ENV=production

# 服务端口 (默认 3001)
PORT=3001

# ============ 域名配置 ============

# 允许的来源 (CORS)
# 多个域名用逗号分隔,不要有空格
# 示例: https://writer.myaichatbox.com,https://app.example.com
ALLOWED_ORIGINS=https://writer.myaichatbox.com

# ============ 数据库配置 ============

# 数据库连接 URL
#
# 选项 1: SQLite (适合小型部署,单服务器)
DATABASE_URL=file:/app/server/prisma/data/novels.db
#
# 选项 2: PostgreSQL (推荐生产环境,支持多实例)
# DATABASE_URL=postgresql://username:password@host:5432/database_name
#
# Railway PostgreSQL 示例:
# DATABASE_URL=postgresql://postgres:password@containers-us-west-123.railway.app:5432/railway
#
# Supabase 示例:
# DATABASE_URL=postgresql://postgres:password@db.xxxx.supabase.co:5432/postgres

# ============ API Keys (必需) ============

# OpenAI API Key (必需)
# 获取地址: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# JWT 密钥 (必需,用于用户认证)
# 请使用强随机字符串,不要使用默认值!
# 生成方法: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-in-production

# ============ 认证配置 (可选) ============

# Clerk 认证 (如果使用 Clerk)
# VITE_CLERK_PUBLISHABLE_KEY=pk_test_your_clerk_publishable_key

# ============ 存储配置 (可选) ============

# Cloudflare R2 对象存储 (用于文件上传)
# 如果不配置,文件将存储在本地 uploads 目录
# CLOUDFLARE_R2_ACCOUNT_ID=your_account_id
# CLOUDFLARE_R2_ACCESS_KEY_ID=your_access_key_id
# CLOUDFLARE_R2_SECRET_ACCESS_KEY=your_secret_access_key
# CLOUDFLARE_R2_BUCKET_NAME=ai-novel-uploads
# CLOUDFLARE_R2_PUBLIC_DOMAIN=your_bucket.r2.dev

# ============ AI 配置 (可选) ============

# Gemini API Key (如果使用 Google Gemini)
# GEMINI_API_KEY=your_gemini_api_key

# Anthropic API Key (如果使用 Claude)
# ANTHROPIC_API_KEY=your_anthropic_api_key

# ============ 日志配置 (可选) ============

# 日志级别: debug, info, warn, error
# LOG_LEVEL=info

# ============ 性能配置 (可选) ============

# 速率限制 (每 15 分钟最大请求数)
# RATE_LIMIT_MAX=100

# 上传文件大小限制 (MB)
# MAX_FILE_SIZE=50

# ================================
# 配置说明
# ================================

# 1. 域名配置:
#    - 确保 ALLOWED_ORIGINS 包含你的实际域名
#    - 使用 https:// 而非 http://
#    - 不要在 URL 末尾添加斜杠
#
# 2. 数据库选择:
#    - SQLite: 适合单服务器,数据在本地
#    - PostgreSQL: 推荐生产环境,支持水平扩展
#
# 3. API Keys:
#    - OpenAI: 必需,用于 AI 功能
#    - JWT_SECRET: 必需,请使用随机生成的强密钥
#
# 4. 安全建议:
#    - 不要将此文件提交到 Git
#    - 定期更换 JWT_SECRET
#    - 使用强密码和密钥
#    - 启用 HTTPS (Railway 和 VPS 都支持)
#
# 5. Railway 部署:
#    在 Railway Dashboard 的 Variables 中配置这些环境变量
#
# 6. VPS 部署:
#    将此文件重命名为 .env 并放在项目根目录
#    docker-compose 会自动读取

# ================================
# 快速开始
# ================================

# 1. 复制此文件:
#    cp .env.production.example .env
#
# 2. 修改必需的配置:
#    - OPENAI_API_KEY
#    - JWT_SECRET
#    - ALLOWED_ORIGINS
#
# 3. 启动应用:
#    docker-compose up -d

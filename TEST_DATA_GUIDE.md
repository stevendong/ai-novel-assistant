# 测试数据使用指南

## 🎉 恭喜！测试数据创建成功

您的AI小说创作助手现在已经有了完整的测试数据，包括：

- **1部小说**：《神秘侦探事件簿》（悬疑推理类）
- **3个角色**：李明（主角侦探）、王警官（导师）、小雨（助手）
- **4个世界设定**：废弃工厂、警察局、调查流程、现代都市背景
- **2个章节**：第1章《神秘的开始》（完整内容）、第2章《寻求援助》（部分内容）

## 🚀 现在可以测试的功能

### 1. 基本功能测试
```bash
# 启动后端服务（如果尚未启动）
cd server && npm start

# 启动前端服务
cd client && npm run dev
```

### 2. API接口验证
访问以下链接验证数据：

- **章节1完整数据**：http://localhost:3001/api/chapters/1
- **章节2数据**：http://localhost:3001/api/chapters/2  
- **小说信息**：http://localhost:3001/api/novels/1
- **健康检查**：http://localhost:3001/api/health

### 3. 前端功能测试

在浏览器中访问 `http://localhost:5175`，然后：

1. **测试章节编辑器**
   - 导航到章节编辑页面
   - 加载章节1或章节2
   - 测试大纲编辑和Markdown预览
   - 测试正文编辑和预览功能

2. **测试数据显示**
   - 查看角色信息（李明、王警官、小雨）
   - 查看世界设定（废弃工厂、警察局等）
   - 验证章节-角色-设定关联关系

3. **测试AI功能**
   - AI大纲生成（需要配置OpenAI API Key）
   - 一致性检查
   - 内容建议

## 📊 数据管理工具

我为您创建了便捷的数据管理脚本：

```bash
cd server

# 查看数据状态
node scripts/manageTestData.js status

# 测试所有API接口
node scripts/manageTestData.js test

# 重新创建测试数据
node scripts/manageTestData.js reset

# 清空所有数据
node scripts/manageTestData.js clear

# 仅初始化测试数据
node scripts/manageTestData.js init
```

## 📋 测试检查清单

### ✅ 后端测试
- [ ] 服务器正常启动（端口3001）
- [ ] 健康检查API正常
- [ ] 章节API返回完整数据
- [ ] 小说API返回角色和设定信息
- [ ] CORS配置正确（支持5175端口）

### ✅ 前端测试  
- [ ] 前端正常启动（端口5175）
- [ ] ChapterEditor组件正常加载
- [ ] Markdown预览功能正常
- [ ] Monaco编辑器正常工作
- [ ] 数据保存功能正常

### ✅ 数据完整性
- [ ] 章节内容包含Markdown格式的大纲和正文
- [ ] 角色信息完整（姓名、描述、性格、背景、关系）
- [ ] 世界设定详细（类型、描述、具体细节）
- [ ] 章节-角色-设定关联正确

## 📖 测试数据内容预览

### 小说信息
- **标题**：神秘侦探事件簿
- **类型**：悬疑推理  
- **分级**：PG-13
- **状态**：写作中

### 主要角色
1. **李明**（主角）
   - 私人侦探，28岁
   - 谨慎但好奇心强，有社交恐惧症
   - 前警察，因父亲失踪走上侦探道路

2. **王警官**（导师）
   - 经验丰富的老警察，50多岁
   - 严肃认真但内心善良
   - 李明的前同事和导师

3. **小雨**（助手）
   - 计算机专家，20多岁
   - 聪明活泼，技术能力强
   - 李明的得力助手

### 第一章：《神秘的开始》
完整的悬疑小说章节，包含：
- 神秘客户委托
- 深夜废弃工厂探险
- 发现可疑线索
- 遭遇危险并逃脱
- 完整的Markdown格式大纲
- 6个情节要点
- 3个插图位置标记

## 🔧 故障排除

### 如果章节无法加载
1. 检查后端服务是否正常运行
2. 验证数据库中是否有数据：`node scripts/manageTestData.js status`
3. 重新创建数据：`node scripts/manageTestData.js reset`

### 如果CORS错误
1. 确认 `server/index.js` 中已添加5175端口
2. 重启后端服务器

### 如果Markdown预览不工作
1. 检查是否安装了 `marked` 和 `dompurify` 包
2. 检查 `client/src/assets/markdown-novel.css` 文件是否存在

## 🎊 开始创作

现在您可以：

1. **编辑现有章节**：修改第1章或第2章的内容
2. **创建新章节**：添加第3章继续故事
3. **发展角色**：完善角色信息和关系网络
4. **扩展世界观**：添加更多地点和规则设定
5. **使用AI功能**：让AI帮助完善内容和检查一致性

祝您创作愉快！🎉✨
